<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CarGame.Pages.SettingsPage"
             BackgroundColor="Black"
             Shell.NavBarIsVisible="False">

    <Grid>

        <Image Source="backgroundgarage.jpg" Aspect="AspectFill" />

        <BoxView Color="#66000000" />

        <!-- Smaller padding on Android so the slider isn't clipped on narrow screens -->
        <Grid Padding="{OnPlatform Android='16', iOS='24', WinUI='24', MacCatalyst='24'}" RowDefinitions="Auto,*,Auto" RowSpacing="18">

        <Label Grid.Row="0"
               Text="Settings"
               TextColor="White"
               FontSize="28"
               HorizontalOptions="Center" />

        <ScrollView Grid.Row="1">
            <Frame Padding="22"
                   CornerRadius="22"
                   HasShadow="True"
                   BackgroundColor="#202020"
                   BorderColor="#3A3A3A"
                   HorizontalOptions="FillAndExpand"
                   VerticalOptions="Center"
                   MaximumWidthRequest="420">

                <VerticalStackLayout Spacing="14" HorizontalOptions="FillAndExpand">

                    <Label Text="{Binding CoinsHeldText}"
                           FontSize="14"
                           TextColor="#CFCFCF"
                           HorizontalTextAlignment="Center" />

                    <Label Text="{Binding CoinsEarnedText}"
                           FontSize="12"
                           TextColor="#AFAFAF"
                           HorizontalTextAlignment="Center"
                           Margin="0,-8,0,0" />

                    <Grid ColumnDefinitions="*,Auto"
                          RowDefinitions="Auto,Auto,Auto"
                          ColumnSpacing="12"
                          RowSpacing="10"
                          HorizontalOptions="FillAndExpand">

                        <Label Grid.Row="0" Grid.Column="0"
                               Text="Volume"
                               TextColor="#CFCFCF"
                               FontSize="14" />

                        <Label Grid.Row="0" Grid.Column="1"
                               Text="{Binding VolumePercentText}"
                               TextColor="#CFCFCF"
                               FontSize="14"
                               HorizontalTextAlignment="End" />

                        <Slider Grid.Row="1"
                                Grid.ColumnSpan="2"
                                Minimum="0"
                                Maximum="1"
                                HorizontalOptions="FillAndExpand"
                                Value="{Binding MasterVolume, Mode=TwoWay}" />

                        <Label Grid.Row="2" Grid.Column="0"
                               Text="Sound Effects (SFX)"
                               TextColor="#CFCFCF"
                               FontSize="14"
                               VerticalTextAlignment="Center" />

                        <Switch Grid.Row="2" Grid.Column="1"
                                IsToggled="{Binding SfxEnabled, Mode=TwoWay}"
                                HorizontalOptions="End" />
                    </Grid>

                    <Button Text="Erase User Data"
                            Command="{Binding EraseDataCommand}"
                            Margin="0,6,0,0" />

                    <Label Text="Resets High Score, coins, owned cars, selected car, upgrades, and audio settings."
                           FontSize="12"
                           TextColor="#AFAFAF"
                           HorizontalTextAlignment="Center" />

                </VerticalStackLayout>
            </Frame>
        </ScrollView>

        <Button Grid.Row="2"
                Text="Back"
                Command="{Binding BackCommand}"
                HorizontalOptions="Center"
                WidthRequest="220" />

        </Grid>

    </Grid>
</ContentPage>
